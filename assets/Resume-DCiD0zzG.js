import{r as f,c as m,o as i,b as n,a as l,w as o,F as Y,g as R,d as V,h as I,t as _,i as Q,j as T,k as J,l as U,E as Z,n as $,q as ee,s as le,v as b,x as te,y as ae,m as oe,z as ne}from"./index-D4FevTp7.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const se={name:"ResumeEditor",props:{resumeData:{type:Object,required:!0}},emits:["style-change"],setup(M,{emit:e}){const s=M.resumeData,a=T({theme:"classic-blue",font:"default",layout:"standard"}),S=()=>{e("style-change",a)};J(()=>a.theme,S),J(()=>a.font,S),J(()=>a.layout,S);const w=U(""),c=U(!1),r=U(null),g=U(!1),D=U(""),d=U([]),h=()=>{s.experience.push({company:"",position:"",startDate:"",endDate:"",current:!1,description:""})},N=p=>{s.experience.splice(p,1)},E=()=>{s.education.push({institution:"",degree:"",major:"",startDate:"",endDate:""})},k=p=>{s.education.splice(p,1)},C=()=>{c.value=!0,le(()=>{r.value.focus()})},P=()=>{w.value.trim()&&(s.skills.push(w.value.trim()),w.value=""),c.value=!1},O=p=>{s.skills.splice(p,1)},F=()=>{const p=document.getElementById("resume-preview");if(!p){alert("简历预览元素不存在，无法导出");return}const v=Z.service({lock:!0,text:"正在生成PDF...",background:"rgba(255, 255, 255, 0.7)"}),B=2;$(p,{scale:B,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",logging:!1}).then(x=>{const W=x.toDataURL("image/jpeg",1),j=new ee("p","mm","a4"),H=j.internal.pageSize.getWidth(),G=j.internal.pageSize.getHeight(),L=x.width/B,K=x.height/B,z=Math.min(H/L,G/K),X=(H-L*z)/2;j.addImage(W,"JPEG",X,10,L*z,K*z);const A=`${s.personalInfo.name||"我的简历"}.pdf`;j.save(A),v.close()}).catch(x=>{console.error("PDF生成失败:",x),alert("PDF生成失败，请重试"),v.close()})},t=()=>{if(!s.personalInfo.name){alert("请至少填写姓名后再保存");return}const p=JSON.parse(localStorage.getItem("savedResumes")||"[]"),v={id:Date.now().toString(),name:`${s.personalInfo.name}的简历 (${new Date().toLocaleString()})`,data:JSON.stringify(s)};p.push(v),localStorage.setItem("savedResumes",JSON.stringify(p)),d.value=p,alert("简历保存成功")},y=()=>{const p=JSON.parse(localStorage.getItem("savedResumes")||"[]");d.value=p},u=()=>{if(!D.value)return;const p=d.value.find(v=>v.id===D.value);if(p){const v=JSON.parse(p.data);Object.assign(v.personalInfo,v.personalInfo),v.experience=[...v.experience],v.education=[...v.education],v.skills=[...v.skills],g.value=!1}};return y(),h(),E(),{resumeData:s,resumeStyle:a,inputSkill:w,inputSkillVisible:c,skillInput:r,loadResumeDialog:g,selectedResume:D,savedResumes:d,addExperience:h,removeExperience:N,addEducation:E,removeEducation:k,showSkillInput:C,addSkill:P,removeSkill:O,exportPDF:F,saveResume:t,loadResume:u}}},de={class:"resume-editor"},ie={class:"editor-container"},re={class:"form-section"},ue={class:"form-section"},me={class:"item-header"},ce={class:"add-btn-container"},fe={class:"form-section"},_e={class:"item-header"},pe={class:"add-btn-container"},ve={class:"form-section"},ye={class:"item-container"},Ve={class:"form-section"},he={class:"item-container"},ge={class:"resume-actions"},ke={key:0,class:"no-saved"},De={class:"dialog-footer"};function be(M,e,s,a,S,w){const c=f("el-input"),r=f("el-form-item"),g=f("el-form"),D=f("el-divider"),d=f("el-button"),h=f("el-date-picker"),N=f("el-checkbox"),E=f("el-tag"),k=f("el-option"),C=f("el-select"),P=f("el-radio"),O=f("el-radio-group"),F=f("el-dialog");return i(),m("div",de,[n("div",ie,[n("div",re,[e[14]||(e[14]=n("h2",null,"个人信息",-1)),l(g,{model:a.resumeData.personalInfo,"label-width":"80px"},{default:o(()=>[l(r,{label:"姓名"},{default:o(()=>[l(c,{modelValue:a.resumeData.personalInfo.name,"onUpdate:modelValue":e[0]||(e[0]=t=>a.resumeData.personalInfo.name=t),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),l(r,{label:"职位"},{default:o(()=>[l(c,{modelValue:a.resumeData.personalInfo.title,"onUpdate:modelValue":e[1]||(e[1]=t=>a.resumeData.personalInfo.title=t),placeholder:"请输入职位"},null,8,["modelValue"])]),_:1}),l(r,{label:"邮箱"},{default:o(()=>[l(c,{modelValue:a.resumeData.personalInfo.email,"onUpdate:modelValue":e[2]||(e[2]=t=>a.resumeData.personalInfo.email=t),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),l(r,{label:"电话"},{default:o(()=>[l(c,{modelValue:a.resumeData.personalInfo.phone,"onUpdate:modelValue":e[3]||(e[3]=t=>a.resumeData.personalInfo.phone=t),placeholder:"请输入电话"},null,8,["modelValue"])]),_:1}),l(r,{label:"地址"},{default:o(()=>[l(c,{modelValue:a.resumeData.personalInfo.location,"onUpdate:modelValue":e[4]||(e[4]=t=>a.resumeData.personalInfo.location=t),placeholder:"请输入地址"},null,8,["modelValue"])]),_:1}),l(r,{label:"个人描述"},{default:o(()=>[l(c,{type:"textarea",modelValue:a.resumeData.personalInfo.summary,"onUpdate:modelValue":e[5]||(e[5]=t=>a.resumeData.personalInfo.summary=t),placeholder:"请简短描述自己",rows:4},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),n("div",ue,[e[18]||(e[18]=n("h2",null,"工作经验",-1)),(i(!0),m(Y,null,R(a.resumeData.experience,(t,y)=>(i(),m("div",{key:"exp-"+y,class:"item-container"},[y>0?(i(),I(D,{key:0})):b("",!0),n("div",me,[n("h3",null,"工作经历 #"+_(y+1),1),l(d,{type:"danger",size:"small",onClick:u=>a.removeExperience(y)},{default:o(()=>e[15]||(e[15]=[V("删除")])),_:2},1032,["onClick"])]),l(g,{model:t,"label-width":"80px"},{default:o(()=>[l(r,{label:"公司名称"},{default:o(()=>[l(c,{modelValue:t.company,"onUpdate:modelValue":u=>t.company=u,placeholder:"请输入公司名称"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(r,{label:"职位"},{default:o(()=>[l(c,{modelValue:t.position,"onUpdate:modelValue":u=>t.position=u,placeholder:"请输入职位"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(r,{label:"开始时间"},{default:o(()=>[l(h,{modelValue:t.startDate,"onUpdate:modelValue":u=>t.startDate=u,type:"date",placeholder:"选择开始日期",format:"YYYY/MM","value-format":"YYYY/MM"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(r,{label:"结束时间"},{default:o(()=>[l(h,{modelValue:t.endDate,"onUpdate:modelValue":u=>t.endDate=u,type:"date",placeholder:"选择结束日期",format:"YYYY/MM","value-format":"YYYY/MM"},null,8,["modelValue","onUpdate:modelValue"]),l(N,{modelValue:t.current,"onUpdate:modelValue":u=>t.current=u,style:{"margin-left":"10px"}},{default:o(()=>e[16]||(e[16]=[V("至今")])),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(r,{label:"工作描述"},{default:o(()=>[l(c,{type:"textarea",modelValue:t.description,"onUpdate:modelValue":u=>t.description=u,placeholder:"请描述工作内容",rows:4},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["model"])]))),128)),n("div",ce,[l(d,{type:"primary",onClick:a.addExperience},{default:o(()=>e[17]||(e[17]=[V("添加工作经验")])),_:1},8,["onClick"])])]),n("div",fe,[e[21]||(e[21]=n("h2",null,"教育背景",-1)),(i(!0),m(Y,null,R(a.resumeData.education,(t,y)=>(i(),m("div",{key:"edu-"+y,class:"item-container"},[y>0?(i(),I(D,{key:0})):b("",!0),n("div",_e,[n("h3",null,"教育经历 #"+_(y+1),1),l(d,{type:"danger",size:"small",onClick:u=>a.removeEducation(y)},{default:o(()=>e[19]||(e[19]=[V("删除")])),_:2},1032,["onClick"])]),l(g,{model:t,"label-width":"80px"},{default:o(()=>[l(r,{label:"学校名称"},{default:o(()=>[l(c,{modelValue:t.institution,"onUpdate:modelValue":u=>t.institution=u,placeholder:"请输入学校名称"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(r,{label:"学位"},{default:o(()=>[l(c,{modelValue:t.degree,"onUpdate:modelValue":u=>t.degree=u,placeholder:"请输入学位"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(r,{label:"专业"},{default:o(()=>[l(c,{modelValue:t.major,"onUpdate:modelValue":u=>t.major=u,placeholder:"请输入专业"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(r,{label:"开始时间"},{default:o(()=>[l(h,{modelValue:t.startDate,"onUpdate:modelValue":u=>t.startDate=u,type:"date",placeholder:"选择开始日期",format:"YYYY/MM","value-format":"YYYY/MM"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(r,{label:"结束时间"},{default:o(()=>[l(h,{modelValue:t.endDate,"onUpdate:modelValue":u=>t.endDate=u,type:"date",placeholder:"选择结束日期",format:"YYYY/MM","value-format":"YYYY/MM"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["model"])]))),128)),n("div",pe,[l(d,{type:"primary",onClick:a.addEducation},{default:o(()=>e[20]||(e[20]=[V("添加教育经历")])),_:1},8,["onClick"])])]),n("div",ve,[e[23]||(e[23]=n("h2",null,"技能",-1)),n("div",ye,[l(g,{model:a.resumeData.skills,"label-width":"80px"},{default:o(()=>[l(r,{label:"技能列表"},{default:o(()=>[(i(!0),m(Y,null,R(a.resumeData.skills,(t,y)=>(i(),I(E,{key:y,closable:"",onClose:u=>a.removeSkill(y),style:{"margin-right":"5px","margin-bottom":"5px"}},{default:o(()=>[V(_(t),1)]),_:2},1032,["onClose"]))),128)),a.inputSkillVisible?(i(),I(c,{key:0,ref:"skillInput",modelValue:a.inputSkill,"onUpdate:modelValue":e[6]||(e[6]=t=>a.inputSkill=t),onKeyup:Q(a.addSkill,["enter"]),onBlur:a.addSkill,style:{width:"100px"}},null,8,["modelValue","onKeyup","onBlur"])):(i(),I(d,{key:1,onClick:a.showSkillInput},{default:o(()=>e[22]||(e[22]=[V("+ 添加技能")])),_:1},8,["onClick"]))]),_:1})]),_:1},8,["model"])])]),n("div",Ve,[e[26]||(e[26]=n("h2",null,"模板设置",-1)),n("div",he,[l(g,{"label-width":"80px"},{default:o(()=>[l(r,{label:"简历主题"},{default:o(()=>[l(C,{modelValue:a.resumeStyle.theme,"onUpdate:modelValue":e[7]||(e[7]=t=>a.resumeStyle.theme=t),placeholder:"选择主题",style:{width:"100%"}},{default:o(()=>[l(k,{label:"经典蓝",value:"classic-blue"}),l(k,{label:"简约灰",value:"minimal-grey"}),l(k,{label:"专业红",value:"professional-red"}),l(k,{label:"清新绿",value:"fresh-green"})]),_:1},8,["modelValue"])]),_:1}),l(r,{label:"字体样式"},{default:o(()=>[l(C,{modelValue:a.resumeStyle.font,"onUpdate:modelValue":e[8]||(e[8]=t=>a.resumeStyle.font=t),placeholder:"选择字体",style:{width:"100%"}},{default:o(()=>[l(k,{label:"默认字体",value:"default"}),l(k,{label:"微软雅黑",value:"microsoft-yahei"}),l(k,{label:"宋体",value:"simsun"}),l(k,{label:"思源黑体",value:"source-han-sans"})]),_:1},8,["modelValue"])]),_:1}),l(r,{label:"布局样式"},{default:o(()=>[l(O,{modelValue:a.resumeStyle.layout,"onUpdate:modelValue":e[9]||(e[9]=t=>a.resumeStyle.layout=t)},{default:o(()=>[l(P,{label:"standard"},{default:o(()=>e[24]||(e[24]=[V("标准布局")])),_:1}),l(P,{label:"compact"},{default:o(()=>e[25]||(e[25]=[V("紧凑布局")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])])]),n("div",ge,[l(d,{type:"primary",onClick:a.exportPDF},{default:o(()=>e[27]||(e[27]=[V("导出PDF")])),_:1},8,["onClick"]),l(d,{type:"success",onClick:a.saveResume},{default:o(()=>e[28]||(e[28]=[V("保存简历")])),_:1},8,["onClick"]),l(d,{type:"warning",onClick:e[10]||(e[10]=t=>a.loadResumeDialog=!0)},{default:o(()=>e[29]||(e[29]=[V("加载简历")])),_:1})]),l(F,{modelValue:a.loadResumeDialog,"onUpdate:modelValue":e[13]||(e[13]=t=>a.loadResumeDialog=t),title:"加载已保存的简历",width:"30%"},{footer:o(()=>[n("span",De,[l(d,{onClick:e[12]||(e[12]=t=>a.loadResumeDialog=!1)},{default:o(()=>e[30]||(e[30]=[V("取消")])),_:1}),l(d,{type:"primary",onClick:a.loadResume,disabled:!a.selectedResume},{default:o(()=>e[31]||(e[31]=[V(" 加载 ")])),_:1},8,["onClick","disabled"])])]),default:o(()=>[a.savedResumes.length===0?(i(),m("div",ke," 没有已保存的简历 ")):(i(),I(C,{key:1,modelValue:a.selectedResume,"onUpdate:modelValue":e[11]||(e[11]=t=>a.selectedResume=t),placeholder:"选择简历",style:{width:"100%"}},{default:o(()=>[(i(!0),m(Y,null,R(a.savedResumes,t=>(i(),I(k,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]))]),_:1},8,["modelValue"])])}const Se=q(se,[["render",be],["__scopeId","data-v-c68e6a72"]]),Ie={name:"ResumePreview",components:{Message:oe,Phone:ae,Location:te},props:{resumeData:{type:Object,required:!0},resumeStyle:{type:Object,default:()=>({theme:"classic-blue",font:"default",layout:"standard"})}}},we={class:"resume-preview-container"},Ue={class:"resume-header"},Ye={class:"resume-name"},Re={class:"resume-title"},Ce={class:"resume-contact"},xe={key:0,class:"contact-item"},Me={key:1,class:"contact-item"},Ee={key:2,class:"contact-item"},Pe={key:0,class:"resume-section"},je={class:"section-content"},Ne={class:"summary"},Oe={key:1,class:"resume-section"},Fe={class:"section-content"},Be={class:"item-header"},Le={class:"item-title"},ze={class:"item-period"},Je={class:"item-subtitle"},qe={key:0,class:"item-description"},He={key:2,class:"resume-section"},Ke={class:"section-content"},Te={class:"item-header"},We={class:"item-title"},Ge={class:"item-period"},Xe={class:"item-subtitle"},Ae={key:3,class:"resume-section"},Qe={class:"section-content skills-container"};function Ze(M,e,s,a,S,w){const c=f("Message"),r=f("el-icon"),g=f("Phone"),D=f("Location");return i(),m("div",we,[n("div",{id:"resume-preview",class:ne(["resume-preview",[`theme-${s.resumeStyle.theme}`,`font-${s.resumeStyle.font}`,`layout-${s.resumeStyle.layout}`]])},[n("div",Ue,[n("h1",Ye,_(s.resumeData.personalInfo.name||"姓名"),1),n("p",Re,_(s.resumeData.personalInfo.title||"职位"),1),n("div",Ce,[s.resumeData.personalInfo.email?(i(),m("div",xe,[l(r,null,{default:o(()=>[l(c)]),_:1}),n("span",null,_(s.resumeData.personalInfo.email),1)])):b("",!0),s.resumeData.personalInfo.phone?(i(),m("div",Me,[l(r,null,{default:o(()=>[l(g)]),_:1}),n("span",null,_(s.resumeData.personalInfo.phone),1)])):b("",!0),s.resumeData.personalInfo.location?(i(),m("div",Ee,[l(r,null,{default:o(()=>[l(D)]),_:1}),n("span",null,_(s.resumeData.personalInfo.location),1)])):b("",!0)])]),s.resumeData.personalInfo.summary?(i(),m("div",Pe,[e[0]||(e[0]=n("h2",{class:"section-title"},"个人简介",-1)),n("div",je,[n("p",Ne,_(s.resumeData.personalInfo.summary),1)])])):b("",!0),s.resumeData.experience&&s.resumeData.experience.length>0?(i(),m("div",Oe,[e[1]||(e[1]=n("h2",{class:"section-title"},"工作经验",-1)),n("div",Fe,[(i(!0),m(Y,null,R(s.resumeData.experience,(d,h)=>(i(),m("div",{key:"exp-"+h,class:"experience-item"},[n("div",Be,[n("h3",Le,_(d.company||"公司名称"),1),n("span",ze,_(d.startDate||"开始日期")+" - "+_(d.current?"至今":d.endDate||"结束日期"),1)]),n("h4",Je,_(d.position||"职位"),1),d.description?(i(),m("p",qe,_(d.description),1)):b("",!0)]))),128))])])):b("",!0),s.resumeData.education&&s.resumeData.education.length>0?(i(),m("div",He,[e[2]||(e[2]=n("h2",{class:"section-title"},"教育背景",-1)),n("div",Ke,[(i(!0),m(Y,null,R(s.resumeData.education,(d,h)=>(i(),m("div",{key:"edu-"+h,class:"education-item"},[n("div",Te,[n("h3",We,_(d.institution||"学校名称"),1),n("span",Ge,_(d.startDate||"开始日期")+" - "+_(d.endDate||"结束日期"),1)]),n("h4",Xe,_(d.degree||"学位")+" "+_(d.major?"- "+d.major:""),1)]))),128))])])):b("",!0),s.resumeData.skills&&s.resumeData.skills.length>0?(i(),m("div",Ae,[e[3]||(e[3]=n("h2",{class:"section-title"},"技能",-1)),n("div",Qe,[(i(!0),m(Y,null,R(s.resumeData.skills,(d,h)=>(i(),m("span",{key:"skill-"+h,class:"skill-item"},_(d),1))),128))])])):b("",!0)],2)])}const $e=q(Ie,[["render",Ze],["__scopeId","data-v-60d7fb04"]]),el={class:"preview-wrapper"},ll={__name:"Resume",setup(M){const e=T({personalInfo:{name:"",title:"",email:"",phone:"",location:"",summary:""},experience:[],education:[],skills:[]}),s=U({theme:"classic-blue",font:"default",layout:"standard"}),a=S=>{s.value=S};return(S,w)=>{const c=f("el-col"),r=f("el-row"),g=f("el-main"),D=f("el-container");return i(),I(D,{class:"app-container"},{default:o(()=>[l(g,{class:"app-main"},{default:o(()=>[l(r,{gutter:20},{default:o(()=>[l(c,{xs:24,sm:24,md:10,lg:9,xl:8},{default:o(()=>[l(Se,{"resume-data":e,onStyleChange:a},null,8,["resume-data"])]),_:1}),l(c,{xs:24,sm:24,md:14,lg:15,xl:16},{default:o(()=>[n("div",el,[l($e,{"resume-data":e,"resume-style":s.value},null,8,["resume-data","resume-style"])])]),_:1})]),_:1})]),_:1})]),_:1})}}},sl=q(ll,[["__scopeId","data-v-f5d4ad8e"]]);export{sl as default};
